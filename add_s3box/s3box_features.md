# ðŸ¤– ESP32-S3 BOX: ì¸ê³µì§€ëŠ¥ ìŠ¤ë§ˆíŠ¸ ê²Œì´íŠ¸ì›¨ì´ ì„¤ê³„

S3 BOXëŠ” ë‹¨ìˆœí•œ ì¤‘ê³„ê¸°ë¥¼ ë„˜ì–´ ë†ìž¥ì˜ **AI ë¹„ì„œ** ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. `add_s3box` ëª¨ë“ˆì€ ì´ í•µì‹¬ ê¸°ëŠ¥ì„ ì œì–´í•˜ê¸° ìœ„í•œ ì„¤ê³„ì•ˆìž…ë‹ˆë‹¤.

## ðŸŒŸ ì£¼ìš” AI ê¸°ëŠ¥ ì„¤ê³„

### 1. ì˜¤í”„ë¼ì¸ ìŒì„± ëª…ë ¹ (Offline Voice Command)
ì¸í„°ë„· ì—†ì´ë„ S3 BOX ë‚´ë¶€ì˜ í•˜ë“œì›¨ì–´ ê°€ì†ê¸°(ESP-NN)ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
*   **ì‹œë‚˜ë¦¬ì˜¤**: "ì•ˆë…• íŒœ(Wake word)" -> "ëƒ‰ê°ê¸° ê°€ë™í•´(Command)" -> S3 BOXê°€ MQTTë¡œ ì œì–´ ì‹ í˜¸ë¥¼ ì„œë²„ì— ì „ì†¡.
*   **ìž¥ì **: í˜„ìž¥ì—ì„œ ì†ì„ ëª» ì“°ëŠ” ìƒí™©(ìž‘ì—… ì¤‘)ì—ì„œë„ ì¦‰ê°ì ì¸ ìˆ˜ë™ ì œì–´ ê°€ëŠ¥.

### 2. ìŒì„± ìƒí™© ë¸Œë¦¬í•‘ (Voice Status Briefing)
ì„œë²„ì—ì„œ ë°œìƒí•œ ì´ë²¤íŠ¸ë¥¼ ì‚¬ëžŒì´ ì´í•´í•˜ê¸° ì‰¬ìš´ ìžì—°ì–´ë¡œ ì½ì–´ì¤ë‹ˆë‹¤.
*   **ì‹œë‚˜ë¦¬ì˜¤**: ë¶€ì‚° ë†ìž¥ ì˜¨ë„ ìž„ê³„ê°’ ì´ˆê³¼ -> ì„œë²„ê°€ S3 BOXì— `audio_alert` ëª…ë ¹ ë°œì†¡ -> BOX ìŠ¤í”¼ì»¤ì—ì„œ "ì£¼ì˜! ë¶€ì‚° ë†ìž¥ì˜ ì˜¨ë„ê°€ 30ë„ìž…ë‹ˆë‹¤." ìŒì„± ì¶œë ¥.

### 3. ë©€í‹° íŒœ LCD ëŒ€ì‹œë³´ë“œ (Multi-Farm Dashboard)
ì„œìš¸ê³¼ ë¶€ì‚° ë†ìž¥ì˜ ìƒíƒœë¥¼ 2.4ì¸ì¹˜ LCDì— ì‹œê°í™”í•©ë‹ˆë‹¤.
*   **UI êµ¬ì„±**:
    *   **ì¢Œì¸¡**: ì„œìš¸ ë†ìž¥ (ì˜¨ë„/ìŠµë„ ë¦¬ì–¼íƒ€ìž„ ìˆ«ìž)
    *   **ìš°ì¸¡**: ë¶€ì‚° ë†ìž¥ (ì˜¨ë„/ìŠµë„ ë¦¬ì–¼íƒ€ìž„ ìˆ«ìž)
    *   **í•˜ë‹¨**: ìµœê·¼ ì‹œìŠ¤í…œ ë¡œê·¸ ë¡¤ë§ í…ìŠ¤íŠ¸.

### 4. ë™ì  ìŒì„± í•©ì„± (Dynamic TTS Strategy)
ë¯¸ë¦¬ ë…¹ìŒëœ íŒŒì¼ì´ ì•„ë‹Œ, ì„œë²„ì—ì„œ ë³´ë‚¸ í…ìŠ¤íŠ¸ë¥¼ ì¦‰ì„ì—ì„œ ë§ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
*   **ìž‘ë™ ë°©ì‹**: ì„œë²„ê°€ JSON `{"type": "tts", "text": "ìƒì¶” êµ¬ì—­ ì˜¨ë„ê°€ ë†’ìŠµë‹ˆë‹¤"}`ë¥¼ ì „ì†¡.
*   **ê¸°ìˆ ì  ì´ì **:
    *   **ë©”ëª¨ë¦¬ ì ˆì•½**: MP3 íŒŒì¼ ìˆ˜ì²œ ê°œë¥¼ ì €ìž¥í•  í•„ìš”ê°€ ì—†ìŒ.
    *   **ìœ ì—°ì„±**: ë‚ ì§œ, ì‹œê°„, ìˆ˜ì¹˜ ë“± ê°€ë³€ì ì¸ ë°ì´í„°ë¥¼ ì •í™•í•˜ê²Œ ì½ì–´ì¤Œ.
    *   **ë¹ ë¥¸ ë°˜ì‘**: í…ìŠ¤íŠ¸ ë°ì´í„°ëŠ” ìˆ˜ ë°”ì´íŠ¸ì— ë¶ˆê³¼í•˜ì—¬ ì „ì†¡ ì§€ì—°ì´ ê±°ì˜ ì—†ìŒ.

---

## ðŸ“¡ ë°ì´í„° í”„ë¡œí† ì½œ í™•ìž¥ (S3 BOX ì „ìš©)

### A. ìŒì„± ëª…ë ¹ ì „ì†¡ (S3 BOX -> Server)
*   **Topic**: `smartfarm/gateway/voice_cmd`
*   **Payload**:
    ```json
    {
      "cmd": "device_control",
      "target": "cooler",
      "action": "ON",
      "confidence": 0.95
    }
    ```

### B. ë³´ì´ìŠ¤ ì•Œë¦¼ ìˆ˜ì‹  (Server -> S3 BOX)
*   **Topic**: `smartfarm/gateway/audio_play`
*   **Payload**:
    ```json
    {
      "type": "alert",
      "message_id": "TEMP_READY_VOICE",
      "priority": "high"
    }
    ```
