# π“ SmartFarm Node-Server ν†µμ‹  κ·κ²© (v1.0)

μ΄ λ¬Έμ„λ” `add_node` ν΄λ”μ ν…μ¤νΈ μ„λ²„μ™€ μ‹¤μ  ν•λ“μ›¨μ–΄κ°„μ ν†µμ‹  κ·μ•½μ„ μ •μν•©λ‹λ‹¤.

## 1. λ…Έλ“ λ“±λ΅ (Registration)
μƒλ΅μ΄ λ…Έλ“κ°€ λ¶€ν…λλ©΄ κ°€μ¥ λ¨Όμ € μν–‰ν•΄μ•Ό ν•©λ‹λ‹¤.

*   **Topic**: `smartfarm/request/register`
*   **Payload (JSON)**:
    ```json
    { "mac": "ESP32_WROOM_01" }
    ```

## 2. μ„¤μ • μμ‹  (Configuration)
μ„λ²„λ” λ“±λ΅ μ •λ³΄λ¥Ό ν™•μΈν• ν›„ λ…Έλ“ μ „μ© ν† ν”½μΌλ΅ μ„¤μ •μ„ λ³΄λƒ…λ‹λ‹¤. λ…Έλ“λ” μ΄ μ •λ³΄λ¥Ό λ΅μ»¬ λ©”λ¨λ¦¬μ— μ €μ¥ν•΄μ•Ό ν•©λ‹λ‹¤.

*   **Topic**: `smartfarm/config/{μμ‹ μ_MAC}`
*   **Payload (JSON)**:
    ```json
    {
      "node_id": "Seoul_Node_01",
      "thresholds": {
        "temp_min": 18.0,
        "temp_max": 28.0
      }
    }
    ```

## 3. μ„κ³„κ°’ κ²½λ³΄ (Alert)
λ…Έλ“λ” μ‹¤μ‹κ°„μΌλ΅ μ„Όμ„λ¥Ό μΈ΅μ •ν•λ, **μ„λ²„λ΅λ¶€ν„° λ°›μ€ μ„κ³„κ°’μ„ λ²—μ–΄λ‚¬μ„ λ•λ§** λ°μ΄ν„°λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.

*   **Topic**: `smartfarm/{node_id}/alert`
*   **Payload (JSON)**:
    ```json
    {
      "id": "Seoul_Node_01",
      "type": "temp_alert",
      "val": 30.5,
      "min": 18.0,
      "max": 28.0,
      "timestamp": "2026-02-21 18:15:00"
    }
    ```

---
**Tip**: ν…μ¤νΈλ¥Ό μ„ν•΄ PCμ—μ„ `MQTT Explorer` κ°™μ€ ν΄μ„ μ‚¬μ©ν•μ—¬ μ„ JSONμ„ μλ™μΌλ΅ λμ Έλ³΄κ³  μ„λ²„μ λ°μ‘μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
